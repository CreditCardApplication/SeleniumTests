---

# Jenkins Configuration setup

  - name: Create jenkins configuration for RedHat
    file:
      path: /etc/sysconfig/jenkins
      state: touch

  - name: Configure Jenkins Port for RedHat
    lineinfile:
      dest: /etc/sysconfig/jenkins
      regexp: ^JENKINS_PORT=
      line: JENKINS_PORT={{port}}
    register: config_changed

  - name: Configure Jenkins Prefix for RedHat
    when: prefix is defined
    lineinfile:
      dest: /etc/sysconfig/jenkins
      regexp: ^JENKINS_ARGS=
      line: JENKINS_ARGS={{prefix}}
    register: config_changed

  - name: Restart jenkins now
    service: name=jenkins state=restarted
    when: config_changed.changed

